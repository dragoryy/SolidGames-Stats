(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da308"],{"6b17":function(t,s,e){"use strict";e.r(s);e("caad");var a=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"page-title"},[s("h3",[t._v("Общая статистика отрядов")]),s("button",{staticClass:"btn waves-effect waves-light btn-small",on:{click:t.refresh}},[s("i",{staticClass:"material-icons"},[t._v("refresh")])])]),s("div",{staticClass:"row"},[s("ul",{ref:"tab",staticClass:"tabs tabs-fixed-width tab-demo"},[s("li",{staticClass:"tab col s3",class:{disabled:t.loading},on:{click:t.refresh}},[t._m(0)]),s("li",{staticClass:"tab col s3",class:{disabled:t.loading},on:{click:t.refresh}},[t._m(1)])])]),s("div",{staticClass:"row",attrs:{id:"sg"}},[s("p",[t._v("Выберите период:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.choosed,expression:"choosed"}],ref:"sq",staticStyle:{display:"block"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.choosed=s.target.multiple?e:e[0]}}},t._l(t.period,(function(e){return s("option",{key:e.id},[t._v(t._s(e.title))])})),0),t.choosed.replace(/\s+/g,"")==t.currentRotation.replace(/\s+/g,"")?s("div",{},[s("p",[t._v("Выберите сервер:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.serverChoosed,expression:"serverChoosed"}],staticStyle:{display:"block"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.serverChoosed=s.target.multiple?e:e[0]}}},t._l(t.server,(function(e){return s("option",{key:e},[t._v(t._s(e))])})),0),s("p",[t._v("Выберите сторону:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.sideChoosed,expression:"sideChoosed"},{name:"show",rawName:"v-show",value:"Оба сервера"!=t.serverChoosed,expression:"serverChoosed != 'Оба сервера'"}],staticStyle:{display:"block"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.sideChoosed=s.target.multiple?e:e[0]}}},t._l(t.sides,(function(e){return s("option",{key:e},[t._v(t._s(e))])})),0)]):t._e(),t.loading?s("Loader"):s("v-table",{staticClass:"responsive-table highlight centered",attrs:{data:t.n},scopedSlots:t._u([{key:"body",fn:function({displayData:e}){return s("tbody",{},t._l(e,(function(e,a){return s("tr",{key:e.id},[s("td",[t._v(t._s(a+1))]),s("td",{class:{"red-side":t.redSide.includes(e.prefix)&&t.choosed.replace(/\s+/g,"")==t.currentRotation.replace(/\s+/g,""),"blue-side":t.blueSide.includes(e.prefix)&&t.choosed.replace(/\s+/g,"")==t.currentRotation.replace(/\s+/g,"")}},[s("router-link",{staticClass:"squad-name",attrs:{to:"/?tag="+e.prefix.replace(/\[|\]/g,"")}},[t._v(t._s(e.prefix))])],1),s("td",[t._v(t._s(e.players.length))]),s("td",[t._v(t._s(e.averagePlayersCount))]),s("td",[t._v(t._s(e.kills))]),s("td",[t._v(t._s(e.averageKills))]),s("td",[t._v(t._s(e.teamkills))]),s("td",[t._v(t._s(e.averageTeamkills))]),s("td",[t._v(t._s(e.score))])])})),0)}}])},[s("thead",{attrs:{slot:"head"},slot:"head"},[s("th",[t._v("Место")]),s("th",[t._v("Отряд")]),s("v-th",{attrs:{sortKey:"players.length"}},[this.choosed===this.period[0].title?s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Игроки у которых количество игр больше 20",expression:"'Игроки у которых количество игр больше 20'"}],staticClass:"tip"},[t._v("Всего игроков")]):s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Игроки у которых игр больше чем 15% от всех игр ротации",expression:"\n              'Игроки у которых игр больше чем 15% от всех игр ротации'\n            "}],staticClass:"tip"},[t._v("Всего игроков")])]),s("v-th",{attrs:{sortKey:"averagePlayersCount"}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"За последние 4 недели",expression:"'За последние 4 недели'"}],staticClass:"tip"},[t._v("Средняя явка")])]),s("v-th",{attrs:{sortKey:"kills"}},[s("span",[t._v("Всего убийств")])]),s("v-th",{attrs:{sortKey:"averageKills"}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"За последние 4 недели",expression:"'За последние 4 недели'"}],staticClass:"tip"},[t._v("Среднее кол-во убийств")])]),s("v-th",{attrs:{sortKey:"teamkills"}},[s("span",[t._v("Всего тимкиллов")])]),s("v-th",{attrs:{sortKey:"averageTeamkills"}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"За последние 4 недели",expression:"'За последние 4 недели'"}],staticClass:"tip"},[t._v("Среднее кол-во тимкиллов")])]),s("v-th",{attrs:{sortKey:"score",defaultSort:"desc"}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Ср. кол-во киллов / Ср. явка",expression:"'Ср. кол-во киллов / Ср. явка'"}],staticClass:"tip"},[t._v("Счет")])])],1)])],1),s("div",{staticClass:"row",attrs:{id:"mace"}},[t.loading?s("Loader"):s("v-table",{staticClass:"responsive-table highlight",attrs:{data:t.n},scopedSlots:t._u([{key:"body",fn:function({displayData:e}){return s("tbody",{},t._l(e,(function(e,a){return s("tr",{key:e.id},[s("td",[t._v(t._s(a+1))]),s("td",{staticClass:"squad-name"},[s("router-link",{staticClass:"squad-name",attrs:{to:"/?tag="+e.prefix.replace(/\[|\]/g,"")}},[t._v(t._s(e.prefix))])],1),s("td",[t._v(t._s(e.players.length))]),s("td",[t._v(t._s(e.kills))]),s("td",[t._v(t._s(e.teamkills))]),s("td",[t._v(t._s(e.score))])])})),0)}}])},[s("thead",{attrs:{slot:"head"},slot:"head"},[s("th",[t._v("Место")]),s("th",[t._v("Отряд")]),s("v-th",{attrs:{sortKey:"players.length"}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Игроки у которых больше 20 игр",expression:"'Игроки у которых больше 20 игр'"}],staticClass:"tip"},[t._v("Кол-во игроков")])]),s("v-th",{attrs:{sortKey:"kills"}},[s("span",[t._v("Убийств")])]),s("v-th",{attrs:{sortKey:"teamkills"}},[s("span",[t._v("Тимкиллов")])]),s("v-th",{attrs:{sortKey:"score",defaultSort:"desc"}},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Средний счет всех игроков отряда",expression:"'Средний счет всех игроков отряда'"}],staticClass:"tip"},[t._v("Счет")])])],1)])],1)])},i=[function(){var t=this,s=t._self._c;return s("a",{staticClass:"active",attrs:{href:"#sg"}},[s("strong",[t._v("SG")])])},function(){var t=this,s=t._self._c;return s("a",{attrs:{href:"#mace"}},[s("strong",[t._v("MACE")])])}],r=e("2f62"),o={name:"Squads",data:()=>({n:[],loading:!0,choosed:"За все время",period:[],squads:[],server:["Оба сервера","Первый сервер","Второй сервер"],sides:["Обе стороны","Красная сторона","Синяя сторона"],serverChoosed:"Оба сервера",sideChoosed:"Обе стороны",mace:[],tab:null,dataLoaded:!1,currentRotation:"",firstServerRed:["[Slow]","[W8]","[FB]","[IT]","[SOKIL]","[IRA]","[AXE]","[ORK]","[WHS]","[HH]"],firstServerBlue:["[inTeam]","[31st]","[VTR]","[OT]","[YKZ]","[RAF]","[AD]","[FotR]"],secondServerRed:["[GD]","[A]","[FNX]","[RT]","[GROM]","[TAG]","[RL]","[DKK]","[GM]"],secondServerBlue:["[WD]","[AS]","[SKIF]","[RON]","[SGYR]","[Creep]","[ISKRA]","[VOG]","[CU]","[Wagner]"],redSide:[],blueSide:[]}),async mounted(){this.tab=M.Tabs.init(this.$refs.tab,{duration:50}),this.squads.push("[Одиночки]");let t=await fetch("stats.json");t=await t.json();for(let e in t.squadStatistics)this.squads.push(t.squadStatistics[e].prefix);let s=await fetch("rotations_stats.json");s=await s.json();for(let e in s){let t=s[e].startDate,a=s[e].endDate;s[e].startDate=new Date(s[e].startDate).toLocaleString("ru",{year:"numeric",month:"short",day:"numeric"}),null===s[e].endDate?s[e].endDate=" по настоящий момент.":s[e].endDate=new Date(s[e].endDate).toLocaleString("ru",{year:"numeric",month:"short",day:"numeric"}),this.period.push({id:Number(e),title:`${s[e].startDate} - ${s[e].endDate}`,endDate:a,startDate:t})}this.period.push({id:s.length,title:"За все время"}),this.period.reverse(),this.currentRotation=this.period[1].title,this.choosed=this.getInfo().period||"За все время",this.redSide=this.firstServerRed.concat(this.secondServerRed),this.blueSide=this.firstServerBlue.concat(this.secondServerBlue),await this.refresh(),this.dataLoaded=!0},watch:{choosed:function(){this.dataLoaded&&this.refresh()},sideChoosed:function(){this.dataLoaded&&this.refresh()},serverChoosed:function(){this.dataLoaded&&this.refresh()}},methods:{...Object(r["b"])(["getInfo"]),async refresh(){setTimeout(()=>{this.tab.$activeTabLink[0].href.includes("#sg")?this.choosed==this.period[0].title?this.r():this.rotationTable():this.reloadMace()})},async r(){this.loading=!0,this.n=[];let t=await fetch("stats.json");t=await t.json();let s=1;for(let e in t.squadStatistics)t.squadStatistics[e].id=s,s++,this.n.push(t.squadStatistics[e]);this.loading=!1},async rotationTable(){this.loading=!0,this.n=[];let t=await fetch("rotations_stats.json");t=await t.json(),console.log(t);let s=this.$refs.sq.selectedIndex;for(let e in t)if(t[e].startDate==this.period[s].startDate)for(let s in t[e].stats.squad)this.choosed.replace(/\s+/g,"")==this.currentRotation.replace(/\s+/g,"")?("Первый сервер"===this.serverChoosed&&(t[e].stats.squad[s].server="1","Красная сторона"==this.sideChoosed&&this.firstServerRed.includes(t[e].stats.squad[s].prefix)&&this.n.push(t[e].stats.squad[s]),"Синяя сторона"==this.sideChoosed&&this.firstServerBlue.includes(t[e].stats.squad[s].prefix)&&this.n.push(t[e].stats.squad[s]),"Обе стороны"==this.sideChoosed&&(this.firstServerBlue.includes(t[e].stats.squad[s].prefix)||this.firstServerRed.includes(t[e].stats.squad[s].prefix))&&this.n.push(t[e].stats.squad[s])),"Второй сервер"===this.serverChoosed&&(t[e].stats.squad[s].server="2","Красная сторона"==this.sideChoosed&&this.secondServerRed.includes(t[e].stats.squad[s].prefix)&&this.n.push(t[e].stats.squad[s]),"Синяя сторона"==this.sideChoosed&&this.secondServerBlue.includes(t[e].stats.squad[s].prefix)&&this.n.push(t[e].stats.squad[s]),"Обе стороны"==this.sideChoosed&&(this.secondServerBlue.includes(t[e].stats.squad[s].prefix)||this.secondServerRed.includes(t[e].stats.squad[s].prefix))&&this.n.push(t[e].stats.squad[s])),"Оба сервера"===this.serverChoosed&&((this.secondServerRed.includes(t[e].stats.squad[s].prefix)||this.secondServerBlue.includes(t[e].stats.squad[s].prefix))&&(t[e].stats.squad[s].server="2"),(this.firstServerRed.includes(t[e].stats.squad[s].prefix)||this.firstServerBlue.includes(t[e].stats.squad[s].prefix))&&(t[e].stats.squad[s].server="1"),this.n.push(t[e].stats.squad[s]))):this.n.push(t[e].stats.squad[s]);this.loading=!1},async reloadMace(){this.loading=!0,this.n=[];let t=await fetch("stats_mace.json");t=await t.json();let s=1;console.log(t.squadStatistics);for(let e in t.squadStatistics)t.squadStatistics[e].id=s,s++,this.n.push(t.squadStatistics[e]);this.loading=!1}}},d=o,n=e("2877"),l=Object(n["a"])(d,a,i,!1,null,null,null);s["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0da308.dd1db502.js.map