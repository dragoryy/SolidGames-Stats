(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a3d2"],{bb51:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"page-title"},[a("h3",[t._v("Отрядная статистика")]),a("button",{staticClass:"btn waves-effect waves-light btn-small",on:{click:t.refresh}},[a("i",{staticClass:"material-icons"},[t._v("refresh")])])]),a("div",{staticClass:"row"},[a("ul",{ref:"tab",staticClass:"tabs tabs-fixed-width tab-demo"},[a("li",{staticClass:"tab col s3",class:{disabled:t.loading},on:{click:t.refresh}},[t._m(0)]),a("li",{staticClass:"tab col s3",class:{disabled:t.loading},on:{click:t.refresh}},[t._m(1)])])]),a("div",{staticClass:"row",attrs:{id:"sg"}},[a("p",[t._v("Выберите период:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.choosed,expression:"choosed"}],ref:"sq",staticStyle:{display:"block"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.choosed=a.target.multiple?s:s[0]}}},t._l(t.period,(function(s){return a("option",{key:s.id,attrs:{"data-id":s.id}},[t._v(" "+t._s(s.title)+" ")])})),0),a("p",[t._v("Выберите отряд:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticStyle:{display:"block"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.tag=a.target.multiple?s:s[0]}}},t._l(t.squads,(function(s){return a("option",{key:s},[t._v(t._s(s))])})),0),t.loading?a("Loader"):t.n.length?a("v-table",{staticClass:"responsive-table highlight",attrs:{data:t.n},scopedSlots:t._u([{key:"body",fn:function({displayData:s}){return a("tbody",{},t._l(s,(function(s,e){return a("tr",{key:s.id},[a("td",[t._v(t._s(e+1))]),a("td",[a("router-link",{attrs:{to:{name:"Player",params:{nick:s.name}}}},[t._v(t._s(s.lastSquadPrefix+s.name))])],1),a("td",[t._v(t._s(s.totalPlayedGames))]),a("td",[t._v(t._s(s.kills))]),a("td",[t._v(t._s(s.vehicleKills))]),a("td",[t._v(t._s(s.teamkills))]),a("td",[t._v(t._s(s.deaths.byTeamkills))]),a("td",[t._v(t._s(s.deaths.total))]),a("td",[t._v(t._s(s.kdRatio))]),a("td",[t._v(t._s(s.totalScore))])])})),0)}}])},[a("thead",{attrs:{slot:"head"},slot:"head"},[a("th",{attrs:{sortKey:"id"}},[t._v("Место")]),a("v-th",{attrs:{sortKey:"name"}},[a("span",[t._v("Ник")])]),a("v-th",{attrs:{sortKey:"totalPlayedGames"}},[a("span",[t._v("Кол-во игр")])]),a("v-th",{attrs:{sortKey:"kills"}},[a("span",[t._v("Убийств")])]),a("v-th",{attrs:{sortKey:"vehicleKills"}},[a("span",[t._v("Выбито техники")])]),a("v-th",{attrs:{sortKey:"teamkills"}},[a("span",[t._v("Тимкиллов")])]),a("v-th",{attrs:{sortKey:"deaths.byTeamkills"}},[a("span",[t._v("Смертей от ТК")])]),a("v-th",{attrs:{sortKey:"deaths.total"}},[a("span",[t._v("Смертей")])]),a("v-th",{attrs:{sortKey:"kdRatio"}},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"(Убийства - Тимкиллы) / (Смерти - Смерти от ТК)",expression:"'(Убийства - Тимкиллы) / (Смерти - Смерти от ТК)'"}],staticClass:"tip"},[t._v("K/D")])]),a("v-th",{attrs:{sortKey:"totalScore",defaultSort:"desc"}},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"(Убийства - Тимкиллы) / (Кол-во игр - Смерти от ТК)",expression:"'(Убийства - Тимкиллы) / (Кол-во игр - Смерти от ТК)'"}],staticClass:"tip"},[t._v("Счет")])])],1)]):a("p",{staticClass:"center"},[t._v("Игроков не найдено.")])],1),a("div",{staticClass:"row",attrs:{id:"mace"}},[a("p",[t._v("Выберите отряд:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticStyle:{display:"block"},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.tag=a.target.multiple?s:s[0]}}},t._l(t.squads,(function(s){return a("option",{key:s},[t._v(t._s(s))])})),0),t.loading?a("Loader"):t.error?a("p",{staticClass:"center"},[t._v(" Игроков не найдено. Количество игр должно быть больше 20. ")]):a("v-table",{staticClass:"responsive-table highlight",attrs:{data:t.mace},scopedSlots:t._u([{key:"body",fn:function({displayData:s}){return a("tbody",{},t._l(s,(function(s,e){return a("tr",{key:s.id},[a("td",[t._v(t._s(e+1))]),a("td",[a("router-link",{attrs:{to:{name:"Player",params:{nick:s.name}}}},[t._v(t._s(s.lastSquadPrefix+s.name))])],1),a("td",[t._v(t._s(s.totalPlayedGames))]),a("td",[t._v(t._s(s.kills))]),a("td",[t._v(t._s(s.vehicleKills))]),a("td",[t._v(t._s(s.teamkills))]),a("td",[t._v(t._s(s.deaths.byTeamkills))]),a("td",[t._v(t._s(s.deaths.total))]),a("td",[t._v(t._s(s.kdRatio))]),a("td",[t._v(t._s(s.totalScore))])])})),0)}}])},[a("thead",{attrs:{slot:"head"},slot:"head"},[a("th",{attrs:{sortKey:"id"}},[t._v("Место")]),a("v-th",{attrs:{sortKey:"name"}},[a("span",[t._v("Ник")])]),a("v-th",{attrs:{sortKey:"totalPlayedGames"}},[a("span",[t._v("Кол-во игр")])]),a("v-th",{attrs:{sortKey:"kills"}},[a("span",[t._v("Убийств")])]),a("v-th",{attrs:{sortKey:"vehicleKills"}},[a("span",[t._v("Выбито техники")])]),a("v-th",{attrs:{sortKey:"teamkills"}},[a("span",[t._v("Тимкиллов")])]),a("v-th",{attrs:{sortKey:"deaths.byTeamkills"}},[a("span",[t._v("Смертей от ТК")])]),a("v-th",{attrs:{sortKey:"deaths.total"}},[a("span",[t._v("Смертей")])]),a("v-th",{attrs:{sortKey:"kdRatio"}},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"(Убийства - Тимкиллы) / (Смерти - Смерти от ТК)",expression:"'(Убийства - Тимкиллы) / (Смерти - Смерти от ТК)'"}],staticClass:"tip"},[t._v("K/D")])]),a("v-th",{attrs:{sortKey:"totalScore",defaultSort:"desc"}},[a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"(Убийства - Тимкиллы) / (Кол-во игр - Смерти от ТК)",expression:"'(Убийства - Тимкиллы) / (Кол-во игр - Смерти от ТК)'"}],staticClass:"tip"},[t._v("Счет")])])],1)])],1)])},i=[function(){var t=this,a=t._self._c;return a("a",{staticClass:"active",attrs:{href:"#sg"}},[a("strong",[t._v("SG")])])},function(){var t=this,a=t._self._c;return a("a",{attrs:{href:"#mace"}},[a("strong",[t._v("MACE")])])}],l=(s("caad"),s("2f62")),r={name:"Home",data:()=>({n:[],tag:null,squads:[],loading:!0,dataLoaded:!1,choosed:"За все время",period:[],mace:[],tab:null,error:!1}),async mounted(){this.tab=M.Tabs.init(this.$refs.tab,{duration:50});let t=await fetch("stats.json");t=await t.json();for(let s in t.squadStatistics)this.squads.push(t.squadStatistics[s].prefix);this.squads.sort(),this.squads.unshift("[Одиночки]");let a=await fetch("rotations_stats.json");a=await a.json();for(let s in a){let t=a[s].startDate,e=a[s].endDate;a[s].startDate=new Date(a[s].startDate).toLocaleString("ru",{year:"numeric",month:"short",day:"numeric"}),null===a[s].endDate?a[s].endDate=" по настоящий момент.":a[s].endDate=new Date(a[s].endDate).toLocaleString("ru",{year:"numeric",month:"short",day:"numeric"}),this.period.push({id:Number(s),title:`${a[s].startDate} - ${a[s].endDate}`,endDate:e,startDate:t})}this.period.push({id:a.length,title:"За все время"}),this.period.reverse(),this.$route.query.tag&&this.squads.includes("["+this.$route.query.tag+"]")?this.tag="["+this.$route.query.tag+"]":this.tag=this.getInfo().tag||"[FNX]",this.choosed=this.getInfo().period||"За все время",await this.refresh(),this.dataLoaded=!0},watch:{tag:function(t,a){this.dataLoaded&&(this.n=[],this.refresh())},choosed:function(t,a){this.dataLoaded&&(this.n=[],this.refresh())}},methods:{...Object(l["b"])(["getInfo"]),async refresh(){setTimeout(()=>{this.tab.updateTabIndicator(),this.tab.$activeTabLink[0].href.includes("#sg")?this.choosed===this.period[0].title?this.r():this.rotationTable():this.reloadMace()})},async r(){this.loading=!0,this.n=[];let t=await fetch("stats.json");t=await t.json();let a=1,s=[];"[Одиночки]"!==this.tag&&(s=t.squadStatistics.filter(t=>t.prefix===this.tag)[0].players);for(let e in t.globalStatistics)t.globalStatistics[e].lastSquadPrefix===this.tag&&s.indexOf(t.globalStatistics[e].name)>-1?(t.globalStatistics[e].id=a,a++,this.n.push(t.globalStatistics[e])):null===t.globalStatistics[e].lastSquadPrefix&&"[Одиночки]"===this.tag&&(t.globalStatistics[e].lastSquadPrefix="",this.n.push(t.globalStatistics[e]));this.loading=!1},async rotationTable(){this.loading=!0,this.n=[];let t=await fetch("rotations_stats.json");t=await t.json(),console.log(t);let a=this.$refs.sq.selectedIndex;for(let s in t)if(t[s].startDate===this.period[a].startDate)for(let a in t[s].stats.global)t[s].stats.global[a].lastSquadPrefix===this.tag?this.n.push(t[s].stats.global[a]):null===t[s].stats.global[a].lastSquadPrefix&&"[Одиночки]"===this.tag&&(t[s].stats.global[a].lastSquadPrefix="",this.n.push(t[s].stats.global[a]));this.loading=!1},async reloadMace(){this.error=!1,this.loading=!0,this.mace=[];let t=await fetch("stats_mace.json");t=await t.json();let a=1,s=[];if("[Одиночки]"!==this.tag){if(s=t.squadStatistics.filter(t=>t.prefix===this.tag)[0],!s)return this.error=!0,void(this.loading=!1);s=s.players}for(let e in t.globalStatistics)t.globalStatistics[e].lastSquadPrefix===this.tag&&s.indexOf(t.globalStatistics[e].name)>-1?(t.globalStatistics[e].id=a,a++,this.mace.push(t.globalStatistics[e])):null===t.globalStatistics[e].lastSquadPrefix&&"[Одиночки]"===this.tag&&(t.globalStatistics[e].lastSquadPrefix="",this.mace.push(t.globalStatistics[e]));this.loading=!1}}},o=r,n=s("2877"),d=Object(n["a"])(o,e,i,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d21a3d2.e221431c.js.map